<!DOCTYPE html>
<html>
<head>
  <title>authReducer-test.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "Users/barton/projects/snowflakework/snowflake/reducers/auth/__tests__/authReducer-test.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#authreducer-test.js">authReducer-test.js</a>
      </div>

      <div class="heading h2">
        <a href="#imports">Imports</a>
      </div>

      <div class="heading h2">
        <a href="#class-under-test">Class under test</a>
      </div>

      <div class="heading h2">
        <a href="#tests">Tests</a>
      </div>

      <div class="heading h3">
        <a href="#sessiontoken...all-requests-in-general">SessionToken ...all requests in general</a>
      </div>

      <div class="heading h3">
        <a href="#signup-failure-will-have-an-error-associated-with-it">Signup failure will have an error associated with it</a>
      </div>

      <div class="heading h3">
        <a href="#the-user-logs-out">The user logs out</a>
      </div>

      <div class="heading h4">
        <a href="#get-a-valid-state">Get a valid state</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-valid-to-logout">form is valid to logout</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-valid-to-logout-even-with-form-fields">form is valid to logout even with form fields</a>
      </div>

      <div class="heading h3">
        <a href="#the-user-wants-to-reset-their-password">The user wants to reset their password</a>
      </div>

      <div class="heading h4">
        <a href="#before-each">before each</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-not-valid-with-empty-field">form is not valid with empty field</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-valid-with-valid-email">form is valid with valid email</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-invalid-with-invalid-email">form is invalid with invalid email</a>
      </div>

      <div class="heading h3">
        <a href="#the-user-logs-in">The user logs in</a>
      </div>

      <div class="heading h4">
        <a href="#get-a-valid-state-1">Get a valid state</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-not-valid-with-empty-fields">form is not valid with empty fields</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-valid-with-valid-fields">form is  valid with valid fields</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-invalid-with-invalid-fields">form is invalid with invalid fields</a>
      </div>

      <div class="heading h3">
        <a href="#the-user-registers">The user registers</a>
      </div>

      <div class="heading h4">
        <a href="#get-a-valid-state-2">Get a valid state</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-not-valid-with-empty-fields-1">form is not valid with empty fields</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-valid-with-valid-fields-1">form is  valid with valid fields</a>
      </div>

      <div class="heading h4">
        <a href="#form-is-invalid-with-invalid-field">form is  invalid with invalid field</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="authreducer-test.js">
  <h1>
    <a href="#authreducer-test.js" name="authreducer-test.js" class="pilcrow"></a>
authReducer-test.js
  </h1>
</div>
</div>
<div class="body">
<p>Test the authReducer's only function, like all reducers, where the
state and action are passed in.</p>
<p>This will confirm that given a specific action with a type and
payload, that the state object is modified accordingly.</p>
<p><em>Note</em>: in this app,<code>state</code> is an Immutable.js object</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="imports">
  <h2>
    <a href="#imports" name="imports" class="pilcrow"></a>
Imports
  </h2>
</div>
</div>
<div class="body">
<p>These actions are sufficient to test the reducer as many of the
case statements are shared amongst the actions.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> {
  SESSION_TOKEN_REQUEST,
  SESSION_TOKEN_SUCCESS,
  SESSION_TOKEN_FAILURE,

  LOGOUT,
  LOGIN,
  REGISTER,
  FORGOT_PASSWORD,

  ON_AUTH_FORM_FIELD_CHANGE,

  SIGNUP_FAILURE
} = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../../../lib/constants'</span>).default;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="class-under-test">
  <h2>
    <a href="#class-under-test" name="class-under-test" class="pilcrow"></a>
Class under test
  </h2>
</div>
</div>
<div class="body">
<p>Note that since autoMockOff has been called, we will get the actual
formValidation and fieldValidation objects, so we're testing them
as well</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span>  authReducer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../authReducer'</span>).default;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="tests">
  <h2>
    <a href="#tests" name="tests" class="pilcrow"></a>
Tests
  </h2>
</div>
</div>
<div class="body">
<p>authReducer</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">describe(<span class="hljs-string">'authReducer'</span>, () =&gt; {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="sessiontoken...all-requests-in-general">
  <h3>
    <a href="#sessiontoken...all-requests-in-general" name="sessiontoken...all-requests-in-general" class="pilcrow"></a>
SessionToken ...all requests in general
  </h3>
</div>
</div>
<div class="body">
<p>In general, all requests will have fetching true before
actually performing the request,and followed
by either a success or failure action that signals the request
has ended and the fetching flag can be toggled.</p>
<p><em>Note</em>: these tests call the <code>authReducer</code> with an
<code>undefined</code> state so that the reducer will return a valid state.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  describe(<span class="hljs-string">'SESSION-TOKEN-REQUEST'</span>, () =&gt; {

    it(<span class="hljs-string">'starts fetching'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: SESSION_TOKEN_REQUEST
      };
      <span class="hljs-keyword">let</span> next = authReducer(<span class="hljs-literal">undefined</span>, action);

      expect(next.form.isFetching).toBe(<span class="hljs-literal">true</span>);
      expect(next.form.error).toBe(<span class="hljs-literal">null</span>);
    });

    it(<span class="hljs-string">'finishes fetching on success'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: SESSION_TOKEN_SUCCESS
      };
      <span class="hljs-keyword">let</span> next = authReducer(<span class="hljs-literal">undefined</span>, action);

      expect(next.form.isFetching).toBe(<span class="hljs-literal">false</span>);
      expect(next.form.error).toBe(<span class="hljs-literal">null</span>);
    });

    it(<span class="hljs-string">'finishes fetching on failure'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: SESSION_TOKEN_FAILURE
      };
      <span class="hljs-keyword">let</span> next = authReducer(<span class="hljs-literal">undefined</span>, action);

      expect(next.form.isFetching).toBe(<span class="hljs-literal">false</span>);
      expect(next.form.error).toBe(<span class="hljs-literal">null</span>);
    });

  });<span class="hljs-comment">//Session-token-request</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="signup-failure-will-have-an-error-associated-with-it">
  <h3>
    <a href="#signup-failure-will-have-an-error-associated-with-it" name="signup-failure-will-have-an-error-associated-with-it" class="pilcrow"></a>
Signup failure will have an error associated with it
  </h3>
</div>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  describe(<span class="hljs-string">'SIGNUP_FAILURE'</span>, () =&gt; {

    it(<span class="hljs-string">'Finish fetching with error'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: SIGNUP_FAILURE,
        payload: {error: <span class="hljs-string">'error'</span>}
      };
      <span class="hljs-keyword">let</span> next = authReducer(<span class="hljs-literal">undefined</span>, action);

      expect(next.form.isFetching).toBe(<span class="hljs-literal">false</span>);
      expect(next.form.error).toBeDefined();
      expect(next.form.error.error).toBe(<span class="hljs-string">'error'</span>);
    });


  });<span class="hljs-comment">//SIGNUP_FAILURE</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="the-user-logs-out">
  <h3>
    <a href="#the-user-logs-out" name="the-user-logs-out" class="pilcrow"></a>
The user logs out
  </h3>
</div>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  describe(<span class="hljs-string">'LOGOUT'</span>, () =&gt; {
    <span class="hljs-keyword">let</span> initialState = <span class="hljs-literal">null</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="get-a-valid-state">
  <h4>
    <a href="#get-a-valid-state" name="get-a-valid-state" class="pilcrow"></a>
Get a valid state
  </h4>
</div>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    beforeEach(() =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: <span class="hljs-string">'dummy'</span>
      };
      initialState = authReducer(<span class="hljs-literal">undefined</span>, action);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-valid-to-logout">
  <h4>
    <a href="#form-is-valid-to-logout" name="form-is-valid-to-logout" class="pilcrow"></a>
form is valid to logout
  </h4>
</div>
</div>
<div class="body">
<p>Should have a valid form and in the Logged out state</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is valid to logout'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: LOGOUT
      };
      <span class="hljs-keyword">let</span> next = authReducer(initialState, action);

      expect(next.form.state).toBe(LOGOUT);
      expect(next.form.isValid).toBe(<span class="hljs-literal">true</span>);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-valid-to-logout-even-with-form-fields">
  <h4>
    <a href="#form-is-valid-to-logout-even-with-form-fields" name="form-is-valid-to-logout-even-with-form-fields" class="pilcrow"></a>
form is valid to logout even with form fields
  </h4>
</div>
</div>
<div class="body">
<p>Even if the form were to have some data, once they log out that
form should be cleared, valid and in the Logged out state</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is valid to logout even with form fields'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: LOGOUT
      };
      <span class="hljs-keyword">let</span> init = authReducer(initialState, action);
      <span class="hljs-keyword">let</span> withFields =
            init.setIn([<span class="hljs-string">'form'</span>,<span class="hljs-string">'fields'</span>,<span class="hljs-string">'username'</span>],<span class="hljs-string">'dummy'</span>)
            .setIn([<span class="hljs-string">'form'</span>,<span class="hljs-string">'fields'</span>,<span class="hljs-string">'email'</span>],<span class="hljs-string">'notvalid'</span>)
            .setIn([<span class="hljs-string">'form'</span>,<span class="hljs-string">'fields'</span>,<span class="hljs-string">'password'</span>],<span class="hljs-string">'foo'</span>)
            .setIn([<span class="hljs-string">'form'</span>,<span class="hljs-string">'fields'</span>,<span class="hljs-string">'passwordAgain'</span>],<span class="hljs-string">'foo'</span>);
      <span class="hljs-keyword">let</span> next = authReducer(withFields, action);
      expect(next.form.state).toBe(LOGOUT);
      expect(next.form.isValid).toBe(<span class="hljs-literal">true</span>);
      expect(next.form.fields.username).toBe(<span class="hljs-string">''</span>);
      expect(next.form.fields.email).toBe(<span class="hljs-string">''</span>);
      expect(next.form.fields.password).toBe(<span class="hljs-string">''</span>);
      expect(next.form.fields.passwordAgain).toBe(<span class="hljs-string">''</span>);
    });

  });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="the-user-wants-to-reset-their-password">
  <h3>
    <a href="#the-user-wants-to-reset-their-password" name="the-user-wants-to-reset-their-password" class="pilcrow"></a>
The user wants to reset their password
  </h3>
</div>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  describe(<span class="hljs-string">'FORGOT_PASSWORD'</span>, () =&gt; {
    <span class="hljs-keyword">let</span> initialState = <span class="hljs-literal">null</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="before-each">
  <h4>
    <a href="#before-each" name="before-each" class="pilcrow"></a>
before each
  </h4>
</div>
</div>
<div class="body">
<p>get a valid initial state</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    beforeEach(() =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: <span class="hljs-string">'dummy'</span>
      };
      initialState = authReducer(<span class="hljs-literal">undefined</span>, action);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-not-valid-with-empty-field">
  <h4>
    <a href="#form-is-not-valid-with-empty-field" name="form-is-not-valid-with-empty-field" class="pilcrow"></a>
form is not valid with empty field
  </h4>
</div>
</div>
<div class="body">
<p>A value is required</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is not valid with empty field'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: FORGOT_PASSWORD
      };
      <span class="hljs-keyword">let</span> next = authReducer(initialState, action);

      expect(next.form.state).toBe(FORGOT_PASSWORD);
      expect(next.form.isValid).toBe(<span class="hljs-literal">false</span>);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-valid-with-valid-email">
  <h4>
    <a href="#form-is-valid-with-valid-email" name="form-is-valid-with-valid-email" class="pilcrow"></a>
form is valid with valid email
  </h4>
</div>
</div>
<div class="body">
<p>Verify a valid email address, one that passes the
fieldValidation rule, should show the form as valid</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is valid with valid email'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> emailFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'email'</span>, value: <span class="hljs-string">'bar@ton.com'</span>}
      };
      <span class="hljs-keyword">let</span> emailState = authReducer(initialState,
                                   emailFieldChangeAction);

      <span class="hljs-keyword">const</span> action = {
        type: FORGOT_PASSWORD
      };
      <span class="hljs-keyword">let</span> next = authReducer(emailState,
                             action);
      expect(next.form.state).toBe(FORGOT_PASSWORD);
      expect(next.form.isValid).toBe(<span class="hljs-literal">true</span>);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-invalid-with-invalid-email">
  <h4>
    <a href="#form-is-invalid-with-invalid-email" name="form-is-invalid-with-invalid-email" class="pilcrow"></a>
form is invalid with invalid email
  </h4>
</div>
</div>
<div class="body">
<p>The email field should be a valid email address with respect to
the format, but under no circumstances should the user receive
feedback that the email address exists within the app</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is invalid with invalid email'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> emailFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'email'</span>, value: <span class="hljs-string">'bar@ton'</span>}
      };
      <span class="hljs-keyword">let</span> emailState = authReducer(initialState,
                                   emailFieldChangeAction);

      <span class="hljs-keyword">const</span> action = {
        type: FORGOT_PASSWORD
      };
      <span class="hljs-keyword">let</span> next = authReducer(emailState,
                             action);
      expect(next.form.state).toBe(FORGOT_PASSWORD);
      expect(next.form.isValid).toBe(<span class="hljs-literal">false</span>);
    });

  });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="the-user-logs-in">
  <h3>
    <a href="#the-user-logs-in" name="the-user-logs-in" class="pilcrow"></a>
The user logs in
  </h3>
</div>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  describe(<span class="hljs-string">'LOGIN'</span>, () =&gt; {
    <span class="hljs-keyword">let</span> initialState = <span class="hljs-literal">null</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="get-a-valid-state-1">
  <h4>
    <a href="#get-a-valid-state-1" name="get-a-valid-state-1" class="pilcrow"></a>
Get a valid state
  </h4>
</div>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    beforeEach(() =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: <span class="hljs-string">'dummy'</span>
      };
      initialState = authReducer(<span class="hljs-literal">undefined</span>, action);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-not-valid-with-empty-fields">
  <h4>
    <a href="#form-is-not-valid-with-empty-fields" name="form-is-not-valid-with-empty-fields" class="pilcrow"></a>
form is not valid with empty fields
  </h4>
</div>
</div>
<div class="body">
<p>empty fields are not allowed</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is not valid with empty fields'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: LOGIN
      };
      <span class="hljs-keyword">let</span> next = authReducer(initialState, action);

      expect(next.form.state).toBe(LOGIN);
      expect(next.form.isValid).toBe(<span class="hljs-literal">false</span>);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-valid-with-valid-fields">
  <h4>
    <a href="#form-is-valid-with-valid-fields" name="form-is-valid-with-valid-fields" class="pilcrow"></a>
form is  valid with valid fields
  </h4>
</div>
</div>
<div class="body">
<p>provide valid input and the form should be valid</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is  valid with valid fields'</span>, () =&gt; {

      <span class="hljs-keyword">const</span> userNameFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'username'</span>, value: <span class="hljs-string">'barton'</span>}
      };
      <span class="hljs-keyword">const</span> passwordFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'password'</span>, value: <span class="hljs-string">'Bart0n!'</span>}
      };

      <span class="hljs-keyword">let</span> userNameState = authReducer(initialState,
                                      userNameFieldChangeAction);
      <span class="hljs-keyword">let</span> passwordState = authReducer(userNameState,
                                      passwordFieldChangeAction);

      <span class="hljs-keyword">const</span> action = {
        type: LOGIN
      };

      <span class="hljs-keyword">let</span> next = authReducer(passwordState, action);
      expect(next.form.state).toBe(LOGIN);
      expect(next.form.fields.usernameHasError).toBe(<span class="hljs-literal">false</span>);
      expect(next.form.fields.passwordHasError).toBe(<span class="hljs-literal">false</span>);
      expect(next.form.isValid).toBe(<span class="hljs-literal">true</span>);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-invalid-with-invalid-fields">
  <h4>
    <a href="#form-is-invalid-with-invalid-fields" name="form-is-invalid-with-invalid-fields" class="pilcrow"></a>
form is invalid with invalid fields
  </h4>
</div>
</div>
<div class="body">
<p>If the fields are invalid, the fieldValidation and
formValidation will flag as such</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is invalid with invalid fields'</span>, () =&gt; {

      <span class="hljs-keyword">const</span> userNameFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'username'</span>, value: <span class="hljs-string">'bart'</span>}
      };
      <span class="hljs-keyword">const</span> passwordFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'password'</span>, value: <span class="hljs-string">'Bart!'</span>}
      };

      <span class="hljs-keyword">let</span> userNameState = authReducer(initialState,
                                      userNameFieldChangeAction);
      <span class="hljs-keyword">let</span> passwordState = authReducer(userNameState,
                                      passwordFieldChangeAction);

      <span class="hljs-keyword">const</span> action = {
        type: LOGIN
      };

      <span class="hljs-keyword">let</span> next = authReducer(passwordState, action);
      expect(next.form.state).toBe(LOGIN);
      expect(next.form.fields.usernameHasError).toBe(<span class="hljs-literal">true</span>);
      expect(next.form.fields.passwordHasError).toBe(<span class="hljs-literal">true</span>);
      expect(next.form.isValid).toBe(<span class="hljs-literal">false</span>);
    });

  });<span class="hljs-comment">//LOGIN</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="the-user-registers">
  <h3>
    <a href="#the-user-registers" name="the-user-registers" class="pilcrow"></a>
The user registers
  </h3>
</div>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  describe(<span class="hljs-string">'REGISTER'</span>, () =&gt; {
    <span class="hljs-keyword">let</span> initialState = <span class="hljs-literal">null</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="get-a-valid-state-2">
  <h4>
    <a href="#get-a-valid-state-2" name="get-a-valid-state-2" class="pilcrow"></a>
Get a valid state
  </h4>
</div>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    beforeEach(() =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: <span class="hljs-string">'dummy'</span>
      };
      initialState = authReducer(<span class="hljs-literal">undefined</span>, action);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-not-valid-with-empty-fields-1">
  <h4>
    <a href="#form-is-not-valid-with-empty-fields-1" name="form-is-not-valid-with-empty-fields-1" class="pilcrow"></a>
form is not valid with empty fields
  </h4>
</div>
</div>
<div class="body">
<p>no data, not valid</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is not valid with empty fields'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> action = {
        type: REGISTER
      };
      <span class="hljs-keyword">let</span> next = authReducer(initialState, action);

      expect(next.form.state).toBe(REGISTER);
      expect(next.form.isValid).toBe(<span class="hljs-literal">false</span>);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-valid-with-valid-fields-1">
  <h4>
    <a href="#form-is-valid-with-valid-fields-1" name="form-is-valid-with-valid-fields-1" class="pilcrow"></a>
form is  valid with valid fields
  </h4>
</div>
</div>
<div class="body">
<p>The registration UI requires 4 valid fields before the form is
considered valid.</p>
<p>Provide valid input and get a valid form</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is  valid with valid fields'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> userNameFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'username'</span>, value: <span class="hljs-string">'barton'</span>}
      };
      <span class="hljs-keyword">const</span> emailFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'email'</span>, value: <span class="hljs-string">'bar@ton.com'</span>}
      };
      <span class="hljs-keyword">const</span> passwordFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'password'</span>, value: <span class="hljs-string">'Bart0n!'</span>}
      };
      <span class="hljs-keyword">const</span> passwordAgainFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'passwordAgain'</span>, value: <span class="hljs-string">'Bart0n!'</span>}
      };

      <span class="hljs-keyword">let</span> userNameState = authReducer(initialState,
                                      userNameFieldChangeAction);
      <span class="hljs-keyword">let</span> emailState = authReducer(userNameState,
                                   emailFieldChangeAction);
      <span class="hljs-keyword">let</span> passwordState = authReducer(emailState,
                                      passwordFieldChangeAction);
      <span class="hljs-keyword">let</span> passwordAgainState = authReducer(passwordState,
                                           passwordAgainFieldChangeAction);

      <span class="hljs-keyword">const</span> action = {
        type: REGISTER
      };

      <span class="hljs-keyword">let</span> next = authReducer(passwordAgainState, action);
      expect(next.form.state).toBe(REGISTER);
      expect(next.form.fields.usernameHasError).toBe(<span class="hljs-literal">false</span>);
      expect(next.form.fields.emailHasError).toBe(<span class="hljs-literal">false</span>);
      expect(next.form.fields.passwordHasError).toBe(<span class="hljs-literal">false</span>);
      expect(next.form.fields.passwordAgainHasError).toBe(<span class="hljs-literal">false</span>);
      expect(next.form.isValid).toBe(<span class="hljs-literal">true</span>);
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="form-is-invalid-with-invalid-field">
  <h4>
    <a href="#form-is-invalid-with-invalid-field" name="form-is-invalid-with-invalid-field" class="pilcrow"></a>
form is  invalid with invalid field
  </h4>
</div>
</div>
<div class="body">
<p>Bad data in, invalid form out!</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    it(<span class="hljs-string">'form is  invalid with invalid fields'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> userNameFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'username'</span>, value: <span class="hljs-string">'bart'</span>}
      };
      <span class="hljs-keyword">const</span> emailFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'email'</span>, value: <span class="hljs-string">'barton'</span>}
      };
      <span class="hljs-keyword">const</span> passwordFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'password'</span>, value: <span class="hljs-string">'Bart!'</span>}
      };
      <span class="hljs-keyword">const</span> passwordAgainFieldChangeAction = {
        type: ON_AUTH_FORM_FIELD_CHANGE,
        payload: {field: <span class="hljs-string">'passwordAgain'</span>, value: <span class="hljs-string">'Ba!'</span>}
      };

      <span class="hljs-keyword">let</span> userNameState = authReducer(initialState,
                                      userNameFieldChangeAction);
      <span class="hljs-keyword">let</span> emailState = authReducer(userNameState,
                                   emailFieldChangeAction);
      <span class="hljs-keyword">let</span> passwordState = authReducer(emailState,
                                      passwordFieldChangeAction);
      <span class="hljs-keyword">let</span> passwordAgainState = authReducer(passwordState,
                                           passwordAgainFieldChangeAction);

      <span class="hljs-keyword">const</span> action = {
        type: REGISTER
      };

      <span class="hljs-keyword">let</span> next = authReducer(passwordAgainState, action);
      expect(next.form.state).toBe(REGISTER);
      expect(next.form.fields.usernameHasError).toBe(<span class="hljs-literal">true</span>);
      expect(next.form.fields.emailHasError).toBe(<span class="hljs-literal">true</span>);
      expect(next.form.fields.passwordHasError).toBe(<span class="hljs-literal">true</span>);
      expect(next.form.fields.passwordAgainHasError).toBe(<span class="hljs-literal">true</span>);
      expect(next.form.isValid).toBe(<span class="hljs-literal">false</span>);

    });

  });<span class="hljs-comment">//REGISTER</span>
});<span class="hljs-comment">//authReducer</span>

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
